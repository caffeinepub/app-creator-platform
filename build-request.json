{
  "kind": "build_request",
  "title": "Fix actor not available to start error",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the 'actor not available to start' error by ensuring the backend actor is properly initialized before any frontend queries or mutations attempt to use it. Add a guard in the actor access layer that waits for the actor to be ready before allowing calls, and surfaces a meaningful loading or error state to the user if the actor is unavailable.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "error actor not available to start"
        ]
      },
      "acceptanceCriteria": [
        "The application no longer throws or displays 'actor not available to start' on load or after login",
        "Frontend queries and mutations gracefully wait for the actor to be initialized before executing",
        "If the actor fails to initialize, the UI displays a clear error message instead of crashing",
        "The fix works consistently on both initial page load and after Internet Identity authentication"
      ]
    }
  ],
  "constraints": [
    "Do not modify files in frontend/src/hooks/useInternetIdentity.ts or frontend/src/hooks/useActor.ts directly â€” propose safe alternatives or wrappers",
    "Do not change the backend actor interface or data schema"
  ],
  "nonGoals": [
    "Changing the authentication flow beyond what is needed to fix the actor initialization timing issue",
    "Refactoring unrelated frontend components or pages"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}